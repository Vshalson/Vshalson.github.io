{"children":[{"children":[],"uri":"https://www.notion.so/ea557e796b96461193d3e83d1755b208","type":"text","createdTime":1622371560000,"lastEditedTime":1622371800000,"title":[["Container are Linux process."]]},{"children":[],"uri":"https://www.notion.so/25fe723a0b804a51a2741193629d8cec","type":"code","createdTime":1622371620000,"lastEditedTime":1622371740000,"title":[["#Launching Redis contianer\ndocker run -d --name=db redis:alpine\n#Check  Process ID and Prent Process ID\ndocker top db\n# To list sub process use `Pstree`\npstree -c -p -A $(pgrep dockerd)"]],"language":"Bash","wrap":false},{"children":[],"uri":"https://www.notion.so/c81e9d53cad54cf4ab1ad0cbd17d9344","type":"text","createdTime":1622371800000,"lastEditedTime":1622371860000,"title":[["Configuration of each process define in /proc dir."]]},{"children":[],"uri":"https://www.notion.so/a48494cfba4e4a51880f5c79f5742df4","type":"quote","color":"pink_background","createdTime":1622371871430,"lastEditedTime":1622371920000,"title":[["Give me process ID, I'll give you config dir.\n- /proc"]]},{"children":[],"uri":"https://www.notion.so/092ea34787304ae88df467e3d9fe17b3","type":"code","createdTime":1622371920000,"lastEditedTime":1622373540000,"title":[["DBPID=$(pgrep redis-server)\necho REDIS is $DBPID\n#here DBPID variable to get Process ID of running redis-server process\nls /proc\nAnd\nls /proc/$DBPID"]],"language":"Bash","wrap":false},{"children":[],"uri":"https://www.notion.so/f4f9be40f2664671a64a48a2b2f5cbe9","type":"text","createdTime":1622373480000,"lastEditedTime":1622373480000,"title":[]},{"children":[],"uri":"https://www.notion.so/2939a80980d647e7ab64f1ddf7c23450","type":"text","createdTime":1622372520000,"lastEditedTime":1622373480000,"title":[["Namespaces",[["b",null]]]]},{"children":[],"uri":"https://www.notion.so/1ffe795106bd41fc850344215b8b9488","type":"bulleted_list","createdTime":1622372520000,"lastEditedTime":1622372580000,"title":[["Is to limit what process can see and access certain parts of system"]]},{"children":[{"children":[],"uri":"https://www.notion.so/b5759b36a0294c67b8a0bd319bb5d5a8","type":"text","createdTime":1622372700000,"lastEditedTime":1622372700000,"title":[["https://en.wikipedia.org/wiki/Linux_namespaces",[["a","https://en.wikipedia.org/wiki/Linux_namespaces"]]]]},{"children":[],"uri":"https://www.notion.so/f8a26e08f71a4ccd82e8d3af04a3c653","type":"text","createdTime":1622372640000,"lastEditedTime":1622372640000,"title":[["Available Namespace:"]]},{"children":[],"uri":"https://www.notion.so/8753ec505f3d4671b4fcde5aa92757bf","type":"bulleted_list","createdTime":1622372640000,"lastEditedTime":1622372640000,"title":[["Mount - mnt"]]},{"children":[],"uri":"https://www.notion.so/31aa9f1f26f14cb297094bd4702409dd","type":"bulleted_list","createdTime":1622372640000,"lastEditedTime":1622372640000,"title":[["Network - net"]]},{"children":[],"uri":"https://www.notion.so/e38c559e6ea942af8b6a9988f3f9be67","type":"bulleted_list","createdTime":1622372640000,"lastEditedTime":1622372640000,"title":[["Process ID - pid"]]},{"children":[],"uri":"https://www.notion.so/2c424f56f90149f8b1b6a76a36a9ce6b","type":"bulleted_list","createdTime":1622372640000,"lastEditedTime":1622372700000,"title":[["Control groups - cgroup"]]},{"children":[],"uri":"https://www.notion.so/89c76f3bd79c4057aca71995b84c56c2","type":"bulleted_list","createdTime":1622372700000,"lastEditedTime":1622372700000,"title":[["UTS - hostnames"]]}],"uri":"https://www.notion.so/16b5eb188bde4b2c82d27ca76f379fe9","type":"bulleted_list","createdTime":1622372580000,"lastEditedTime":1622372700000,"title":[["When container started, Docker runtime will create new namespaces to sandbox the process. By running the process in it's own PID namespace."]]},{"children":[],"uri":"https://www.notion.so/fa648c177fed4a8c98a072bc853122ae","type":"text","createdTime":1622372700000,"lastEditedTime":1622372700000,"title":[]},{"children":[{"children":[],"uri":"https://www.notion.so/4fccf1a105ee4cb38e10c60d202f44b6","type":"text","createdTime":1622372760000,"lastEditedTime":1622373780000,"title":[["Without using docker runtime, process can still have it's own namespace."]]},{"children":[],"uri":"https://www.notion.so/81bd85c8d13a4b60ac2a88b10b9d0c2e","type":"code","createdTime":1622372760000,"lastEditedTime":1622372760000,"title":[["unshare --help"]],"language":"Bash","wrap":false},{"children":[],"uri":"https://www.notion.so/b49218a640b14922a44f4cb09536a312","type":"text","createdTime":1622373780000,"lastEditedTime":1622373960000,"title":[["Aha, run bash prompt process seprately"]]},{"children":[],"uri":"https://www.notion.so/b9eac858b7d140b093b271b4748cb0fa","type":"code","createdTime":1622373960000,"lastEditedTime":1622373960000,"title":[["sudo unshare --fork --pid --mount-prac bash\nps\n.. continue experimenting your shit\nexit"]],"language":"Bash","wrap":false}],"uri":"https://www.notion.so/fb77e0a773474fe8ae7f1e17da12a16c","type":"text","createdTime":1622372700000,"lastEditedTime":1622373960000,"title":[["Unshare  : to launch \"contained process\", unshared from parent",[["b",null]]]]},{"children":[],"uri":"https://www.notion.so/26e20c8009084ef1a018420bebdead95","type":"text","createdTime":1622372880000,"lastEditedTime":1622373780000,"title":[["What happens when we share a namespace?"]]},{"children":[],"uri":"https://www.notion.so/2edd48e7e19247a7944bd983459e5235","type":"text","createdTime":1622372880000,"lastEditedTime":1622372940000,"title":[["It allows for process to reused the same namespace,allow to view and interact."]]},{"children":[],"uri":"https://www.notion.so/781b8134e5be4c9ca607b75bf59c09e2","type":"image","createdTime":1622372940000,"lastEditedTime":1622372940000,"source":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2dcb17ac-42b2-4b4b-b662-73e1f8fac683%2FUntitled.png?width=658&table=block&id=781b8134-e5be-4c9c-a607-b75bf59c09e2","caption":[],"width":658,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.29027355623100304,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/67f7bd8c4cad4b4bb7ae2b86e628f3e7","type":"text","createdTime":1622372940000,"lastEditedTime":1622373000000,"title":[["NSEnter",[["b",null]]],[" : to attach process to existing Namespace (used for debugging)"]]},{"children":[],"uri":"https://www.notion.so/ac243b517e5e49c6b79be8439de29b8d","type":"code","createdTime":1622373000000,"lastEditedTime":1622374020000,"title":[["nsenter --target $DBPID --mount --uts --ipc --net --pid ps aux\n# target process "]],"language":"Bash","wrap":false},{"children":[{"children":[],"uri":"https://www.notion.so/7480cb1ebe0a4f1aa12c47cbcae5d2c5","type":"text","createdTime":1622374080000,"lastEditedTime":1622374080000,"title":[["Connect ngix to DB namespace"]]},{"children":[],"uri":"https://www.notion.so/c6db3e01d9c84423ac30dbb87734fd23","type":"image","createdTime":1622374200000,"lastEditedTime":1622374200000,"source":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb3058904-70a3-44d3-b3b1-5ee34695baec%2FUntitled.png?width=659&table=block&id=c6db3e01-d9c8-4423-ac30-dbb87734fd23","caption":[],"width":659,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.15781487101669195,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/a9c55683f7f74691be82b0e3b1a17e12","type":"text","createdTime":1622374080000,"lastEditedTime":1622374200000,"title":[["Make variable, WEBPID "],["WEBPID=$(pgre nginx | tail -n1)",[["c",null]]]]},{"children":[],"uri":"https://www.notion.so/bddbfa5a05bd47ebae652b1d89041d4b","type":"text","createdTime":1622374200000,"lastEditedTime":1622374260000,"title":[["Namespace for both process points to same location."]]}],"uri":"https://www.notion.so/fbca75a70385416f98d59314e1282b1d","type":"text","createdTime":1622374020000,"lastEditedTime":1622374440000,"title":[["Using Docker, we can share namespaces "],["container:<container_name>",[["c",null]]],["    "]]},{"children":[],"uri":"https://www.notion.so/a1fe06e75ce9458694baf7ff0464f911","type":"text","createdTime":1622374500000,"lastEditedTime":1622374500000,"title":[]},{"children":[],"uri":"https://www.notion.so/e8d6fb62fd6a4aa7afd122c5e4e46ab0","type":"text","createdTime":1622374260000,"lastEditedTime":1622374500000,"title":[["Control groups (Cgroups) : limit amout of resources a process can consume."]]},{"children":[],"uri":"https://www.notion.so/48a60addbc974ab69d9cfc15a594e5b0","type":"code","createdTime":1622374620000,"lastEditedTime":1622374800000,"title":[["# CHeck cgroup mapping\ncat /proc/$DBPID/cgroup\n# Check CPU stats for process\ncat /sys/fs/cgroup/cpu,cpuacct/docker/$DBID/cpuacct.stat\n# CHeck CPU share limit\ncat /sys/fs/cgroup/cpu,cpuacct/docker/$DBID/cpuacct.shares\n\nDcoker Cgroup stored @ /sys/fs/cgroup/memory/docker/"]],"language":"Bash","wrap":false},{"children":[{"children":[],"uri":"https://www.notion.so/622dc4432713415e890ede5a94b46b71","type":"text","createdTime":1622374800000,"lastEditedTime":1622374800000,"title":[["By default, container have no limit on memory."]]},{"children":[],"uri":"https://www.notion.so/e28f692a9da340469a7fa3f576c6e576","type":"code","createdTime":1622374800000,"lastEditedTime":1622374980000,"title":[["docker stats <container_name> --no-stream"]],"language":"Bash","wrap":false},{"children":[],"uri":"https://www.notion.so/ce340e46737f46f5a32fb5df295ee122","type":"text","createdTime":1622375460000,"lastEditedTime":1622375460000,"title":[["To set limits,"]]},{"children":[],"uri":"https://www.notion.so/f49cd74d24874d618c250892a9661e17","type":"code","createdTime":1622375460000,"lastEditedTime":1622375520000,"title":[["echo 8000000 > /sys/fs/cgroup/memory/docker/$DBID/memory.limit_in_bytes\nHere 8000000 in bytes to 7.629 mibibyte"]],"language":"Bash","wrap":false}],"uri":"https://www.notion.so/7a10f867e121480790ed3622bcae8c6a","type":"text","createdTime":1622374800000,"lastEditedTime":1622375640000,"title":[["Docker can control memory limits via Cgroup settings."]]},{"children":[],"uri":"https://www.notion.so/d70e0908cb864cf2a254493234080e4b","type":"image","createdTime":1622375640000,"lastEditedTime":1622375640000,"source":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F81178178-b50e-4e74-bea7-9758e0440277%2FUntitled.png?width=1222&table=block&id=d70e0908-cb86-4cf2-a254-493234080e4b","caption":[],"width":1222,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.18330605564648117,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/53b69f0a797f43468255ff2c8c07ecf6","type":"text","createdTime":1622375700000,"lastEditedTime":1622375700000,"title":[]},{"children":[],"uri":"https://www.notion.so/6fc53ca603b9489dbfa2b443dd7d6ee6","type":"text","createdTime":1622375700000,"lastEditedTime":1622375700000,"title":[]},{"children":[{"children":[],"uri":"https://www.notion.so/ebae56f5b7524a94b5e06f3d1fbaa3a1","type":"text","createdTime":1622375700000,"lastEditedTime":1622375760000,"title":[["All actions with Linux done via syscalls."]]},{"children":[],"uri":"https://www.notion.so/af1443f3b71b4f8eab8ff71b6fffe268","type":"text","createdTime":1622375760000,"lastEditedTime":1622375760000,"title":[["Kernel has 330 syscalls to perform operations."]]},{"children":[],"uri":"https://www.notion.so/5203aa6d9e21404baf5b0e7be5ffb117","type":"text","createdTime":1622375760000,"lastEditedTime":1622375820000,"title":[["All applications use combination of syscalls to perform required operatn."]]},{"children":[],"uri":"https://www.notion.so/71e7c04ec4554d55a90f2502e5d0ca4e","type":"text","createdTime":1622375820000,"lastEditedTime":1622375820000,"title":[["AppArmor is a application defined profile that describes which parts of the system a process can access.",[["b",null]]]]}],"uri":"https://www.notion.so/badabeee85774d0881b937b8d70abf36","type":"text","createdTime":1622375640000,"lastEditedTime":1622375820000,"title":[["AppArmor",[["b",null]]]]},{"children":[],"uri":"https://www.notion.so/d6d011a05149417eb4b20f103939648e","type":"divider","createdTime":1622375700000,"lastEditedTime":1622376180000},{"children":[],"uri":"https://www.notion.so/eda1c36052194c8f9fbf64149dc41931","type":"text","createdTime":1622376180000,"lastEditedTime":1622376180000,"title":[]},{"children":[],"uri":"https://www.notion.so/9e74f9da43e744698fab38876f6ef042","type":"heading","createdTime":1622376217138,"lastEditedTime":1622376600000,"title":[["Scenario : 2"]],"depth":2},{"children":[],"uri":"https://www.notion.so/6c02dd22deeb4e09a2c0f3a902a110f0","type":"text","createdTime":1622376180000,"lastEditedTime":1622376240000,"title":[["Container image: container image is tar file containing tar files. Each tar file is layer. Once all tar file extract into same location then you have container's filesystem."]]},{"children":[],"uri":"https://www.notion.so/e69f734a09ec4a19a92f31582231df77","type":"image","createdTime":1622376660000,"lastEditedTime":1622376660000,"source":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Feed561f9-77bb-40b1-a924-87c2e7e233ca%2FUntitled.png?width=781&table=block&id=e69f734a-09ec-4a19-a92f-31582231df77","caption":[],"width":781,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.9487836107554417,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/2db99bb0592a4dc0986f3607feeb28fd","type":"text","createdTime":1622376600000,"lastEditedTime":1622376660000,"title":[["Image also includes meta deta about version info and tag name."]]},{"children":[],"uri":"https://www.notion.so/74dae127db4042cbb28af33b766c27bc","type":"image","createdTime":1622376840000,"lastEditedTime":1622376840000,"source":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7e70f63f-82b4-4e03-ad13-fed77eb792be%2FUntitled.png?width=747&table=block&id=74dae127-db40-42cb-b28a-f33b766c27bc","caption":[],"width":747,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.34805890227576974,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/2c66120aadb44e5687462e71d2452c83","type":"text","createdTime":1622376960000,"lastEditedTime":1622376960000,"title":[["And extract it further,"]]},{"children":[],"uri":"https://www.notion.so/747bba209ee04816a771f2ec92524190","type":"image","createdTime":1622376960000,"lastEditedTime":1622376960000,"source":"https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fcfaef57e-3ad0-402f-807c-e2526adf0e3e%2FUntitled.png?width=819&table=block&id=747bba20-9ee0-4816-a771-f2ec92524190","caption":[],"width":819,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.33455433455433453,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/f92d24cf8d9d48f9b97c75050281a3e3","type":"divider","createdTime":1622377140000,"lastEditedTime":1622377140000},{"children":[],"uri":"https://www.notion.so/96810433605e4e38b2152b08760c6570","type":"text","createdTime":1622377140000,"lastEditedTime":1622377140000,"title":[]},{"children":[{"children":[],"uri":"https://www.notion.so/9f9c6d181c6544f2bc2230e4953ef1fe","type":"text","createdTime":1622377320000,"lastEditedTime":1622377380000,"title":[["Import tar file to create an image from scratch."]]},{"children":[],"uri":"https://www.notion.so/06dbdc12682443f1972a99c10fa6f8b7","type":"text","createdTime":1622377380000,"lastEditedTime":1622377440000,"title":[["Here busybox (package with standard unix programs) as base."]]}],"uri":"https://www.notion.so/ae7b1c7cac37446f849690344a02c6a0","type":"text","createdTime":1622377158637,"lastEditedTime":1622377440000,"title":[["Create image with dockerfile",[["b",null]]]]},{"children":[],"uri":"https://www.notion.so/24d2fea663b44ed0893dd519815ea5f3","type":"code","createdTime":1622377440000,"lastEditedTime":1622377680000,"title":[["# Download and extract busybox rootfs\ncurl -LO https://raw.githubusercontent.com/moby/moby/a575b0b1384b2ba89b79cbd7e770fbeb616758b3/contrib/mkimage/busybox-static && chmod +x busybox-static\n# To download rootfs and main binaries \n./busybox-static busybox\n# create a file\necho KatacodaPrivateBuild > busybox/release\n# dir can into tar and import into docker as an image.\ntar -C busybox -c . | docker import - busybox\n# launch as container, here to print release\ndocker run busybox cat /release"]],"language":"Bash","wrap":false},{"children":[],"uri":"https://www.notion.so/59bd6b49f75d455aaa49b8f424a07e9f","type":"divider","createdTime":1622377320000,"lastEditedTime":1622377740000},{"children":[],"uri":"https://www.notion.so/f5f4c10fe30241b7893d46ec4a0fdda6","type":"text","createdTime":1622377740000,"lastEditedTime":1622377740000,"title":[]},{"children":[],"uri":"https://www.notion.so/1702dbced537469990c9276d0dfcf689","type":"heading","createdTime":1622377774508,"lastEditedTime":1622378520000,"title":[["Docker foundations"]],"depth":1},{"children":[],"uri":"https://www.notion.so/b3a3c4781d5a442bb63299e0cc92e09d","type":"text","createdTime":1622379360000,"lastEditedTime":1622379360000,"title":[]},{"children":[],"uri":"https://www.notion.so/77a899acd337449c85e4eede689530dd","type":"heading","createdTime":1622378520000,"lastEditedTime":1622379360000,"title":[["Deploy first Docker Container"]],"depth":3},{"children":[],"uri":"https://www.notion.so/44bb2e7433d94bb5900dc6bfb246f160","type":"code","createdTime":1622379360000,"lastEditedTime":1622381580000,"title":[["# search docker image\ndocker search redis\n\n# Run command in foreground\ndocker run -d redis\n555555"]],"language":"Bash","wrap":false}],"uri":"https://www.notion.so/1df4b6916d034aa6bdd79517b86d4351","type":"page","createdTime":1622317500000,"lastEditedTime":1622392620000,"title":[["KataCoda Docker, Container, Builders and Registers"]],"icon":"⏱️","fullWidth":false,"coverPosition":1,"properties":{"!`\"w":[["Yes"]],"98uZ":[["Documenting Katacoda learnings"]],":H`m":[["Yes"]],"|Ay0":[["post"]]}}